const deleteButton=document.getElementById("deleteAccount"),privacyCheckbox=document.getElementById("isPrivate"),SaveAccountButton=document.getElementById("accountSave"),SaveBasicInfoButton=document.getElementById("accountSaveBasic"),passwordField=document.getElementById("password"),emailField=document.getElementById("email"),firstNameField=document.getElementById("firstName"),lastNameField=document.getElementById("lastName");function deleteAccount(){const e=document.getElementById("message");fetch("/api/accounts/delete",{method:"DELETE"}).then(e=>e.json()).then(t=>{e.innerHTML="<p class='mt-3'>Your account has been deleted. <a href='/'>Go back to the main page</a></p>"}).catch(t=>e.innerText=t.toString())}function updatePrivacy(){const e=document.getElementById("acUpdateStatus"),t=document.getElementById("currentStatus");privacyCheckbox.checked?(privacyCheckbox.setAttribute("value",!0),fetch("/api/accounts/update/?privacy=true",{method:"PUT"}).then(t=>{t.json(),e.innerText=""}).then(n=>{e.innerText="OK. UPDATED",t.innerText="Private Account",setTimeout(()=>e.innerText="",3e3)}).catch(t=>{e.innerText=t.toString()})):(privacyCheckbox.setAttribute("value",!1),fetch("/api/accounts/update/?privacy=false",{method:"PUT"}).then(t=>{t.json(),e.innerText=""}).then(n=>{e.innerText="OK. UPDATED",t.innerText="Public Account",setTimeout(()=>e.innerText="",3e3)}).catch(t=>{e.innerText=t.toString()}))}function updateCredentials(){const e=emailField.value,t=passwordField.value,n=document.createElement("div");fetch(`/api/accounts/update/?email=${e}&password=${t}`,{method:"PUT"}).then(e=>e.json()).then(e=>{"ERR_ACC_EXISTS"===e.status?n.innerHTML='\n        <div class="alert alert-danger" role="alert">\n          There is an account using that email.\n        </div>\n        ':n.innerHTML='\n        <div class="alert alert-success" role="alert">\n          Your account has been updated\n          <i class="fas fa-check"></i>\n        </div>\n        '}).catch(e=>{n.innerHTML='\n      <div class="alert alert-danger" role="alert">\n        It looks like we are having some trouble updating your account\n        <i class="far fa-frown"></i>\n        Try to refresh the page\n      </div>\n      ',console.error(e)}),document.body.prepend(n)}function updateBasicInfo(){const e=document.createElement("div");fetch(`/api/accounts/update/?firstName=${firstNameField.value}&lastName=${lastNameField.value}`,{method:"PUT"}).then(e=>e.json()).then(t=>{"OK"===t.status&&(console.log(t),e.innerHTML='\n      <div class="alert alert-success" role="alert">\n      Your account has been updated\n      <i class="fas fa-check"></i>\n      </div>\n      ')}).catch(t=>{console.log(t),e.innerHTML='\n        <div class="alert alert-danger" role="alert">\n          It looks like we are having some trouble updating your account\n          <i class="far fa-frown"></i>\n          Try to refresh the page\n        </div>\n      '})}deleteButton.addEventListener("click",deleteAccount),privacyCheckbox.addEventListener("change",updatePrivacy),SaveAccountButton.addEventListener("click",updateCredentials),SaveBasicInfoButton.addEventListener("click",updateBasicInfo);