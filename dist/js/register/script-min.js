let submitButton=document.getElementById("submitButton"),avatarInput=document.getElementById("avatar"),emailStatus=document.getElementById("emailStatus"),privateCheck=document.getElementById("privateCheck"),email=document.getElementById("email");function checkboxValue(){privateCheck.checked?privateCheck.setAttribute("value",!0):privateCheck.setAttribute("value",!1)}function checkEmail(){fetch("/api/checkEmail",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`email=${email.value}`}).then(e=>e.json()).then(e=>{let t=document.getElementById("password"),a=document.getElementById("bio");1==e.result&&(emailStatus.innerText="There is an account with this email",emailStatus.classList.remove("ok"),emailStatus.classList.add("error"),t.setAttribute("disabled",!0),a.setAttribute("disabled",!0),avatarInput.setAttribute("disabled",!0),privateCheck.setAttribute("disabled",!0),submitButton.setAttribute("disabled",!0)),0==e.result&&(emailStatus.innerText="You can use this email",emailStatus.classList.remove("error"),emailStatus.classList.add("ok"),t.removeAttribute("disabled"),a.removeAttribute("disabled"),avatarInput.removeAttribute("disabled"),privateCheck.removeAttribute("disabled"),submitButton.removeAttribute("disabled")),0==e.emailValidity&&(emailStatus.innerText="Please enter a valid email",emailStatus.classList.remove("ok"),emailStatus.classList.add("error"),t.setAttribute("disabled",!0),a.setAttribute("disabled",!0),avatarInput.setAttribute("disabled",!0),privateCheck.setAttribute("disabled",!0),submitButton.setAttribute("disabled",!0))})}email.addEventListener("keyup",checkEmail),privateCheck.addEventListener("click",checkboxValue);